# Python Secret Santa
A Python Secret Santa script.

The script randomly shuffle participants, makes pairs, and sends emails to whom who has to prepare a present.

![Screen-shot "Test mode result"](https://raw.githubusercontent.com/vindexins/python-secret-santa/master/docs/screenshot3.jpg)

## Dependencies

*python3*

## Usage

Create **conf.py** file, fill with options. Default options are provided in **conf_default.py** (do not edit that file).

Minimal options:
- SMTP_CREDENTIALS
- PARTICIPANTS
- SEND_FROM

### For help

`python3 santa.py -h`

Show minimal help information.

### For test mode

`python3 santa.py`

Check all provided options, check connection with SMTP server, shuffle list, make pairs, output in terminal results.

### For real send emails

`python3 santa.py -s`

Send emails. Pairs recreate each time randomly. It is impossible to send emails with the previous test mode results.

## Options

### PARTICIPANTS

```
PARTICIPANTS = (
    ("johny.boy@fake.mail", "John"),
    ("diana.girl@fake.mail", "Diana")
)
```

*Email*, *name*

Provide participants of a party.

### EXCLUDE

```
EXCLUDE = (
    ("Diana", "John"),  # They are married
    ("Mike", "Molly")   # They hate each other :)
)
```

Script has to exclude provided pairs from the result.

### SMTP

`
SMTP = {
    "host": "smtp.gmail.com",
    "port": 465
}
`

SMTP server options.

### SMTP_USE_SSL

`SMTP_USE_SSL = True`

Use TLS/SSL.

### SMTP_CREDENTIALS

`SMTP_CREDENTIALS = ("fakename@fake.mail", "fake_password")`

Your username and password for login to SMTP server.

### SEND_FROM

`SEND_FROM = "fakename@fake.mail"`

Email "from".

### EMAIL_SUBJECT

`EMAIL_SUBJECT = "Hi, {sender_name}!"`

Email subject. 

Available context: *sender_name, sender_email, receiver_name, receiver_name*

### EMAIL_TEXT

`EMAIL_TEXT = "Hi, {sender_name}!"`

Email plaint text. 

Available context: *sender_name, sender_email, receiver_name, receiver_name*

### EMAIL_HTML

```
EMAIL_HTML = """
<html>
    <head></head>
    <body>
        <p>Hello, dear {sender_name}!</p>
        <p>Ho! Ho! Ho!<br/>
        Secret Santa has made his choice. You have to make a present for {receiver_name}.<br/>
        The maximum limit is $100.00</p>
        <br/>
        <p>This message was automatically generated by a script<br/>
        You can check it out here:<br/>
        <a href="https://github.com/vindexins/python-secret-santa/">Secret Santa</a></p>
    </body>
</html>
"""
```

Email html text. 

Available context: *sender_name, sender_email, receiver_name, receiver_name*

### MAX_REVIEWS

`MAX_REVIEWS = 1000`

Maximum attempts to resolve restrictions' problems.

## Tips

### HTML

Use [bootstrapemail editor](https://bootstrapemail.com/editor) for html  text.

Warning, you have to replace all `{` and `}` within `{{` and `}}` to work properly with context variables.

### WIKI

What is [Secret Santa](https://en.wikipedia.org/wiki/Secret_Santa)

### Gmail account

You can not use gmail account just only by providing regular credentials. You have to use [App password](https://github.com/vindexins/python-secret-santa/wiki/How-to-configure-Gmail).

With respect,
Â© Serhii Peleshok
